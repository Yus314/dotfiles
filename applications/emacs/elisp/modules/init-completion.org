#+TITLE: Completion Settings
* Header
#+begin_src emacs-lisp :tangle yes
  ;;; init-completion.el --- Minibuffer/input completion -*- lexical-binding: t -*-
#+end_src
* vercico
#+begin_src emacs-lisp :tangle yes
  (autoload 'vertico-mode "vertico-autoloads" nil t)

  (add-hook 'emacs-startup-hook #'vertico-mode)

  (with-eval-after-load 'vertico
  (setopt vertico-count 8)
  (setopt vertico-cycle t)
  (keymap-set vertico-map "DEL" 'vertico-directory-delete-char))
#+end_src
* marginalia
#+begin_src emacs-lisp :tangle yes
  (autoload 'marginalia-mode "marginalia" nil t)
  (add-hook 'emacs-startup-hook #'marginalia-mode)
#+end_src
* orderless
#+begin_src emacs-lisp :tangle yes
   (use-package orderless
     :custom
     (orderless-matching-styles
   			     '(orderless-prefixes
   			       ))
     (completion-styles  '(orderless basic))
     (completion-category-overrides  '((file
                                         (styles basic partial-completion))
   				       (command (styles orderless))))
     )
   ;(autoload 'orderless-all-completions "orderless" nil t)
   ;(autoload 'orderless-try-completion "orderless" nil t)

   ;(with-eval-after-load 'minibuffer
   ;  (setq orderless-matching-styles
  ; 	'(orderless-prefixes
   ;	  ))
   ;  (setq completion-styles  '(orderless basic))
   ;  (setq completion-category-overrides  '((file
   ;					  (styles basic partial-completion))
   ;					 (command (styles orderless))))
    ; )
#+end_src
* consult
#+begin_src emacs-lisp :tangle yes
  (autoload 'consult-buffer "consult")
  (keymap-global-set "C-x b" 'consult-buffer)
  #+end_src
* affe
#+begin_src emacs-lisp :tangle yes
  (autoload 'affe-find "affe" nil t)
  (autoload 'affe-find-home "affe" nil t)
  (autoload 'affe-grep "affe" nil t)

  (with-eval-after-load 'affe
    (defun affe-find-home ()
      "Affeをホームルートから実行する"
      (interactive)
      (affe-find "~")
      )
    (setopt affe-highlight-function  'orderless-highlight-matches)
    (setopt affe-find-command  "fd --color=never --full-path")
    )
  (keymap-global-set "M-g f" 'affe-find)
  (keymap-global-set "M-g h" 'affe-find-home)
  (keymap-global-set "M-g g" 'affe-grep)
#+end_src
* corfu
#+begin_src emacs-lisp :tangle yes
;  (autoload-if-found '(global-corfu-mode) "corfu" nil t)
;  (autoload-if-found '(corfu-popupinfo-mode) "corfu-popupinfo" nil t)

;  (add-hook 'emacs-startup-hook #'global-corfu-mode)

;  (with-eval-after-load 'corfu
;  (setq corfu-auto  t)
;  (setq corfu-auto-delay  0)
;  (setq corfu-popupinfo-delay  0)
;  (setq corfu-quit-no-match  'separator)
;  (setq corfu-auto-prefix  1)
;  (setq corfu-cycle  t)
;  (setq corfu-quit-at-boundary nil)
;  (setq text-mode-ispell-word-completion  nil)
;  (setq tab-always-indent  'complete)
;  (corfu-popupinfo-mode)
;  (keymap-unset corfu-map "RET")
;  (keymap-unset corfu-map "<up>")
;  (keymap-unset corfu-map "<remap> <next-line>")
;  (keymap-unset corfu-map "<remap> <previous-line>")
;  (keymap-unset corfu-map "<down>")
;  (keymap-set corfu-map "C-n" 'corfu-next)
;  (keymap-set corfu-map "C-p" 'corfu-previous)
;  (add-to-list 'corfu-margin-formatters #'nerd-icons-corfu-formatter)
;  )
#+end_src
* cape
#+begin_src emacs-lisp :tangle yes
;  (autoload-if-found '(cape-file cape-keyword) "cape" nil t)

;  (with-eval-after-load 'minibuffer
;    (add-to-list 'completion-at-point-functions #'cape-file)
    ;(add-to-list 'completion-at-point-functions #'cape-keyword)
;    )
#+end_src
* Provide
#+begin_src emacs-lisp :tangle yes
  (provide 'init-completion)
#+end_src
